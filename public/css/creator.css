/* ==========================================================================
   1. Variables de Couleur (Thèmes Clair & Sombre)
   ========================================================================== */
:root {
    /* Couleurs de base */
    --darkgreen: #0F461F;
    --lightgreen: #23AF20;
    --lightgreen-hover: #1a8c18; /* Couleur pour le survol */
    --black: #000000;
    --white: #ffffff;
    --red: #e74c3c;
    --blue: #3498db;

    /* == Thème Clair (par défaut) == */
    --bg-primary: #f4f7f6;      /* Fond principal */
    --bg-secondary: #ffffff;    /* Fond des cartes, conteneurs, tables */
    --bg-sidebar: var(--darkgreen);
    --text-primary: #333333;      /* Texte principal */
    --text-secondary: var(--white); /* Texte sur fonds sombres (sidebar) */
    --border-color: #dddddd;
    --shadow-color: rgba(0, 0, 0, 0.05);
}

body.dark-theme {
    /* == Thème Sombre == */
    --bg-primary: #121212;
    --bg-secondary: #1e1e1e;
    --bg-sidebar: #1f2937; /* Un gris sombre pour le thème sombre */
    --text-primary: #e0e0e0;
    --text-secondary: #ffffff;
    --border-color: #444444;
    --shadow-color: rgba(0, 0, 0, 0.2);
}


/* ==========================================================================
   2. Styles de Base et Layout
   ========================================================================== */
body {
    margin: 0;
    font-family: 'Arial', sans-serif;
    display: flex;
    min-height: 100vh;
    background-color: var(--bg-primary);
    color: var(--text-primary);
    transition: background-color 0.3s ease, color 0.3s ease;
}

.sidebar {
    width: 250px;
    flex-shrink: 0; /* Empêche la sidebar de rétrécir */
    background-color: var(--bg-sidebar);
    color: var(--text-secondary);
    height: 100vh;
    padding: 20px;
    display: flex;
    flex-direction: column;
    position: fixed;
    top: 0;
    left: 0;
    transition: left 0.3s ease-in-out; /* Pour l'animation mobile */
    z-index: 1000;
}

.main-content {
    flex-grow: 1;
    padding: 30px;
    margin-left: 250px; /* Espace pour la sidebar */
    background-color: var(--bg-primary);
}


/* ==========================================================================
   3. Composants de la Sidebar (AVEC BOUTON DÉCONNEXION INTÉGRÉ)
   ========================================================================== */
.sidebar h2 {
    color: var(--text-secondary);
    font-size: 28px;
    margin-bottom: 30px;
    text-align: center;
}

.sidebar .sidebar-menu {
    flex-grow: 1;
}

/* Style commun pour les liens ET le bouton de déconnexion */
.sidebar .sidebar-menu a,
.sidebar .sidebar-menu .logout-form button {
    display: flex;
    align-items: center;
    gap: 10px;
    color: var(--text-secondary);
    text-decoration: none;
    margin: 10px 0;
    padding: 12px 15px;
    border-radius: 5px;
    font-size: 1.1rem;
    transition: background-color 0.3s ease, color 0.3s ease;
    width: 100%;
    box-sizing: border-box;
}

/* Styles spécifiques pour que le bouton se comporte comme un lien */
.sidebar .sidebar-menu .logout-form {
    margin: 0; /* Retire les marges par défaut du formulaire */
}

.sidebar .sidebar-menu .logout-form button {
    background: none;
    border: none;
    cursor: pointer;
    text-align: left; /* Aligne le texte à gauche comme les autres liens */
    font-family: inherit; /* Utilise la même police que le reste de la page */
}

/* Effet de survol commun */
.sidebar .sidebar-menu a:hover,
.sidebar .sidebar-menu .logout-form button:hover {
    background-color: var(--lightgreen);
    color: var(--black);
}

/* Style commun pour les icônes */
.sidebar a i,
.sidebar .logout-form button i {
    font-size: 1.2rem;
}


/* ==========================================================================
   4. Styles du Contenu Principal (Cartes, Formulaires, Tableaux)
   ========================================================================== */

/* Conteneur générique */
.container {
    background-color: var(--bg-secondary);
    padding: 25px;
    border-radius: 8px;
    box-shadow: 0 4px 10px var(--shadow-color);
    border: 1px solid var(--border-color);
}

h1 {
    color: var(--darkgreen);
    margin-bottom: 20px;
}

body.dark-theme h1 {
    color: var(--lightgreen);
}

/* Formulaires */
form label {
    color: var(--text-primary);
    font-weight: bold;
    margin-bottom: 5px;
}

form input, form select, form textarea {
    width: 100%;
    padding: 10px;
    margin-top: 5px;
    margin-bottom: 15px;
    border: 1px solid var(--border-color);
    border-radius: 4px;
    box-sizing: border-box;
    background-color: var(--bg-primary);
    color: var(--text-primary);
}

form button[type="submit"] {
    background-color: var(--lightgreen);
    color: var(--white);
    padding: 10px 20px;
    border: none;
    border-radius: 5px;
    cursor: pointer;
    font-size: 1rem;
    transition: background-color 0.3s ease;
}

form button[type="submit"]:hover {
    background-color: var(--lightgreen-hover);
}

/* Cartes de statistiques */
.dashboard-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-card {
    background-color: var(--bg-secondary);
    color: var(--text-primary);
    padding: 20px;
    border-radius: 8px;
    text-align: center;
    box-shadow: 0 4px 8px var(--shadow-color);
    border: 1px solid var(--border-color);
}

.stat-card h3 {
    font-size: 1.2rem;
    margin-bottom: 10px;
    color: var(--lightgreen);
}

.stat-card p {
    font-size: 2.5rem;
    font-weight: bold;
}

/* Tableaux */
table {
    width: 100%;
    border-collapse: collapse;
    margin-top: 20px;
    background-color: var(--bg-secondary);
    box-shadow: 0 4px 10px var(--shadow-color);
    border-radius: 8px;
    overflow: hidden;
}

table th, table td {
    padding: 12px 15px;
    text-align: left;
    border-bottom: 1px solid var(--border-color);
}

table th {
    background-color: var(--lightgreen);
    color: var(--white);
    font-weight: bold;
}

table tbody tr:hover {
    background-color: rgba(35, 175, 32, 0.1); /* Surlignage vert clair transparent */
}

/* Boutons d'action dans les tableaux */
.action-buttons .edit-btn { background-color: var(--blue); color: white; }
.action-buttons .delete-btn { background-color: var(--red); color: white; border: none; cursor: pointer; }


/* ==========================================================================
   5. Menu Mobile et Responsive Design
   ========================================================================== */

/* Bouton "Hamburger" pour le menu mobile */
.menu-toggle {
    display: none; /* Caché par défaut sur grand écran */
    position: fixed;
    top: 15px;
    left: 15px;
    z-index: 1001;
    background: var(--bg-secondary);
    color: var(--text-primary);
    border: 1px solid var(--border-color);
    padding: 8px 12px;
    cursor: pointer;
    font-size: 24px;
    border-radius: 5px;
}

/* Styles pour écrans de moins de 768px */
@media (max-width: 768px) {
    .menu-toggle {
        display: block; /* Afficher le bouton */
    }

    .sidebar {
        left: -260px; /* Caché en dehors de l'écran */
    }

    .sidebar.active {
        left: 0; /* Affiche la sidebar */
    }

    .main-content {
        margin-left: 0; /* Le contenu prend toute la largeur */
        padding: 20px;
    }

    /* Styles pour les tableaux sur mobile */
    table thead {
        display: none; /* Cacher les en-têtes */
    }
    table, table tbody, table tr, table td {
        display: block;
        width: 100%;
    }
    table tr {
        margin-bottom: 15px;
        border: 1px solid var(--border-color);
        border-radius: 8px;
    }
    table td {
        text-align: right; /* Aligne le contenu à droite */
        padding-left: 50%;
        position: relative;
    }
    table td::before {
        content: attr(data-label); /* Utilise un attribut pour le label */
        position: absolute;
        left: 15px;
        width: 45%;
        text-align: left;
        font-weight: bold;
    }
}

/* ==========================================================================
   6. Styles Spécifiques - Page "Sélectionner un Livre"
   ========================================================================== */

.page-title {
    text-align: center;
    font-size: 2rem;
    margin-bottom: 30px;
}

/* Grille des Livres */
.book-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 25px;
}

/* Carte de Livre */
.book-card {
    background-color: var(--bg-secondary);
    border: 1px solid var(--border-color);
    border-radius: 8px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    align-items: center;
    text-align: center;
    box-shadow: 0 4px 8px var(--shadow-color);
    transition: all 0.3s ease-in-out;
}

.book-card:hover {
    box-shadow: 0 6px 12px var(--shadow-color);
    transform: translateY(-5px);
}

.book-cover {
    width: 96px;  /* 6rem */
    height: 144px; /* 9rem */
    object-fit: cover;
    border-radius: 5px;
    margin-bottom: 15px;
    box-shadow: 0 5px 10px rgba(0,0,0,0.15);
}

.book-cover-placeholder {
    width: 96px;
    height: 144px;
    background-color: var(--bg-primary);
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: 5px;
    margin-bottom: 15px;
    border: 1px dashed var(--border-color);
    color: var(--text-primary);
    font-size: 0.8rem;
    text-align: center;
    padding: 5px;
}

.book-title {
    font-size: 1.1rem;
    font-weight: bold;
    color: var(--text-primary);
    margin-bottom: 8px;
}

.book-description {
    color: var(--text-primary);
    opacity: 0.8;
    font-size: 0.9rem;
    margin-bottom: 15px;
    flex-grow: 1; /* Pour pousser le bouton vers le bas */
}

.btn-add-chapter {
    margin-top: auto;
    background-color: var(--lightgreen);
    color: var(--white);
    font-weight: bold;
    padding: 8px 16px;
    border-radius: 20px;
    text-decoration: none;
    border: none;
    cursor: pointer;
    transition: transform 0.2s ease-in-out, background-color 0.2s;
}

.btn-add-chapter:hover {
    background-color: var(--lightgreen-hover);
    transform: scale(1.05);
}

/* Alerte de Succès */
.alert-success {
    background-color: rgba(35, 175, 32, 0.1);
    border-left: 4px solid var(--lightgreen);
    color: var(--text-primary);
    padding: 12px 15px;
    border-radius: 5px;
    margin-bottom: 25px;
}

/* Styles pour la vue "Aucun livre" */
.empty-state {
    text-align: center;
    background-color: var(--bg-secondary);
    padding: 30px;
    border-radius: 8px;
    border: 1px dashed var(--border-color);
    margin-top: 40px;
}
.empty-state-title {
    margin-top: 10px;
    font-size: 1.2rem;
    font-weight: 500;
    color: var(--text-primary);
}
.empty-state-text {
    margin-top: 5px;
    font-size: 1rem;
    color: var(--text-primary);
    opacity: 0.7;
}
.empty-state-icon {
    margin: 0 auto;
    height: 48px;
    width: 48px;
    color: var(--text-primary);
    opacity: 0.5;
}
.btn-create-book {
    display: inline-block;
    padding: 10px 20px;
    font-size: 1rem;
    font-weight: 500;
    border-radius: 5px;
    color: var(--white);
    background-color: var(--blue);
    text-decoration: none;
    margin-top: 20px;
    transition: background-color 0.2s;
}
.btn-create-book:hover {
    opacity: 0.9;
}